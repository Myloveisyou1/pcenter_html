<ul id="nav">
    <!--<li><a href="javascript:;"><i class="iconfont">&#xe6b8;</i>
            <cite>会员管理</cite>
            <i class="iconfont nav_right">&#xe697;</i>
        </a>
        <ul class="sub-menu">
            <li><a _href="member-list.html">
                    <i class="iconfont">&#xe6a7;</i>
                    <cite>会员列表</cite>

                </a>
            </li >
            <li>
                <a _href="member-del.html">
                    <i class="iconfont">&#xe6a7;</i>
                    <cite>会员删除</cite>

                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <i class="iconfont">&#xe70b;</i>
                    <cite>会员管理</cite>
                    <i class="iconfont nav_right">&#xe697;</i>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a _href="xxx.html">
                            <i class="iconfont">&#xe6a7;</i>
                            <cite>会员列表</cite>

                        </a>
                    </li >
                    <li>
                        <a _href="xx.html">
                            <i class="iconfont">&#xe6a7;</i>
                            <cite>会员删除</cite>

                        </a>
                    </li>
                    <li>
                        <a _href="xx.html">
                            <i class="iconfont">&#xe6a7;</i>
                            <cite>等级管理</cite>

                        </a>
                    </li>

                </ul>
            </li>
        </ul>
    </li>-->
</ul>

<script type="text/javascript">

    $(function() {

        /*if (MENU == null || MENU != "" || MENU == undefined) {
            layer.msg('登陆已失效', {
                icon: 5,
                time: 2000 //2秒关闭（如果不配置，默认是3秒）
            }, function(){
                window.location.href = "login.html";
            });
            return;
        }*/

        /**
         * 加载菜单信息
         */
        console.log(MENU);
        var parent = "",a = "";
        for (var i=0;i<MENU.length;i++) {
            parent += '<li><a href="javascript:;"><i class="iconfont">'+MENU[i].icon+'</i>' +
                    '<cite>'+MENU[i].menuName+'</cite>' +
                    '<i class="iconfont nav_right">&#xe697;</i></a>';
            //遍历二级菜单
            var menuLists = MENU[i].menuList;
            if(menuLists.length > 0) {
                var child = "";
                parent += '<ul class="sub-menu">';
                for(var j=0;j<menuLists.length;j++) {
                    child += '<li>' +
                            '<a _href="'+menuLists[j].url+'">' +
                            '<i class="iconfont">'+menuLists[j].icon+'</i>'+
                            '<cite>'+menuLists[j].menuName+'</cite>' +
                            '</a></li>';
                }
                child += '</ul>';
                parent += child+'</li>';
            } else {
                parent += '</li>';
            }
        }
        console.log(parent);

        $("#nav").html(parent);


        var tab = {
            tabAdd: function(title,url,id){
                //新增一个Tab项
                element.tabAdd('xbs_tab', {
                    title: title
                    ,content: '<iframe tab-id="'+id+'" frameborder="0" src="'+url+'" scrolling="yes" class="x-iframe"></iframe>'
                    ,id: id
                })
            }
            ,tabDelete: function(othis){
                //删除指定Tab项
                element.tabDelete('xbs_tab', '44'); //删除：“商品管理”


                othis.addClass('layui-btn-disabled');
            }
            ,tabChange: function(id){
                //切换到指定Tab项
                element.tabChange('xbs_tab', id); //切换到：用户管理
            }
        };

        /**
         * 点击展开二级菜单
         */
        $('.left-nav #nav li').click(function (event) {
            if($(this).children('.sub-menu').length){
                if($(this).hasClass('open')){
                    $(this).removeClass('open');
                    $(this).find('.nav_right').html('&#xe697;');
                    $(this).children('.sub-menu').stop().slideUp();
                    $(this).siblings().children('.sub-menu').slideUp();
                }else{
                    $(this).addClass('open');
                    $(this).children('a').find('.nav_right').html('&#xe6a6;');
                    $(this).children('.sub-menu').stop().slideDown();
                    $(this).siblings().children('.sub-menu').stop().slideUp();
                    $(this).siblings().find('.nav_right').html('&#xe697;');
                    $(this).siblings().removeClass('open');
                }
            }else{

                var url = $(this).children('a').attr('_href');
                var title = $(this).find('cite').html();
                var index  = $('.left-nav #nav li').index($(this));

                for (var i = 0; i <$('.x-iframe').length; i++) {
                    if($('.x-iframe').eq(i).attr('tab-id')==index+1){
                        tab.tabChange(index+1);
                        event.stopPropagation();
                        return;
                    }
                };

                tab.tabAdd(title,url,index+1);
                tab.tabChange(index+1);
            }

            event.stopPropagation();

        })

    })



</script>